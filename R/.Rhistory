theme_minimal() +
theme(axis.text.x = element_text(angle = 90, vjust = 0.5, hjust=0))
theme_minimal() +
theme(axis.text.x = element_text(angle = 90, vjust = 0.5, hjust=1))
ggplot(datos, aes(x = SIOSE__USO, fill = NOMBRE_HUM)) +
geom_bar(position = "fill") +
labs(title = "Proporción de Usos del Suelo en 1984 y Actualidad por Humedal",
x = "Uso del Suelo",
y = "Proporción") +
scale_fill_viridis_d(option = "H") + #B o H están bien, se distinguen los humedales
theme_minimal() +
theme(axis.text.x = element_text(angle = 90, vjust = 0.5, hjust=1))
ggplot(datos, aes(x = SIOSE__USO, fill = NOMBRE_HUM)) +
geom_bar(position = "fill") +
labs(title = "Proporción de Usos del Suelo en 1984 y Actualidad por Humedal",
x = "Uso del Suelo",
y = "Proporción") +
scale_fill_viridis_d(option = "H") + #B o H están bien, se distinguen los humedales
theme_minimal() +
theme(axis.text.x = element_text(angle = 270, vjust = 0.5, hjust=1))
ggplot(datos, aes(x = SIOSE__USO, fill = NOMBRE_HUM)) +
geom_bar(position = "fill") +
labs(title = "Proporción de Usos del Suelo en 1984 y Actualidad por Humedal",
x = "Uso del Suelo",
y = "Proporción") +
scale_fill_viridis_d(option = "H") + #B o H están bien, se distinguen los humedales
theme_minimal() +
theme(axis.text.x = element_text(angle = 270, vjust = 0.5, hjust=0))
# Gráfico de barras apiladas para mostrar la proporción de cada uso del suelo por humedal
ggplot(datos, aes(x = MUCVA__USO, fill = NOMBRE_HUM)) +
geom_bar(position = "fill") +
labs(title = "Proporción de Usos del Suelo en 1984 y Actualidad por Humedal",
x = "Uso del Suelo",
y = "Proporción") +
scale_fill_viridis_d(option = "H") #B o H están bien, se distinguen los humedales
# Gráfico de barras apiladas para mostrar la proporción de cada uso del suelo por humedal
ggplot(datos, aes(x = MUCVA__USO, fill = NOMBRE_HUM)) +
geom_bar(position = "fill") +
labs(title = "Proporción de Usos del Suelo en 1984 y Actualidad por Humedal",
x = "Uso del Suelo",
y = "Proporción") +
scale_fill_viridis_d(option = "H") + #B o H están bien, se distinguen los humedales
theme_minimal() +
theme(axis.text.x = element_text(angle = 90, vjust = 0.5, hjust = 1))
# Gráfico de barras apiladas para mostrar la proporción de cada uso del suelo por humedal
ggplot(datos, aes(x = MUCVA__USO, fill = NOMBRE_HUM)) +
geom_bar(position = "fill") +
labs(title = "Proporción de Usos del Suelo en 1984 y Actualidad por Humedal",
x = "Uso del Suelo",
y = "Proporción") +
scale_fill_viridis_d(option = "H") + #B o H están bien, se distinguen los humedales
theme_minimal() +
theme(axis.text.x = element_text(angle = 270, vjust = 0.5, hjust = 1))
# Gráfico de barras apiladas para mostrar la proporción de cada uso del suelo por humedal
ggplot(datos, aes(x = MUCVA__USO, fill = NOMBRE_HUM)) +
geom_bar(position = "fill") +
labs(title = "Proporción de Usos del Suelo en 1984 y Actualidad por Humedal",
x = "Uso del Suelo",
y = "Proporción") +
scale_fill_viridis_d(option = "H") + #B o H están bien, se distinguen los humedales
theme_minimal() +
theme(axis.text.x = element_text(angle = 270, vjust = 0.5, hjust = 0))
ggplot(datos, aes(x = SIOSE__USO, fill = NOMBRE_HUM)) +
geom_bar(position = "fill") +
labs(title = "Proporción de usos del suelo en la actualidad por humedal",
x = "Uso del suelo",
y = "Proporción") +
scale_fill_viridis_d(option = "B") + #B o H están bien, se distinguen los humedales
theme_minimal() +
theme(axis.text.x = element_text(angle = 270, vjust = 0.5, hjust=0))
ggplot(datos, aes(x = SIOSE__USO, fill = NOMBRE_HUM)) +
geom_bar(position = "fill") +
labs(title = "Proporción de usos del suelo en la actualidad por humedal",
x = "Uso del suelo",
y = "Proporción") +
scale_fill_viridis_d(option = "H") + #B o H están bien, se distinguen los humedales
theme_minimal() +
theme(axis.text.x = element_text(angle = 270, vjust = 0.5, hjust=0))
library(readxl)
datos <-read_excel("C:/Users/VE-UGR-0208/Desktop/TFM/rTFM/Resultados_puntos_analisis.xlsx", range = "A1:O2081")
summary(datos)
View(datos)
df_area_usos84 <-read_excel("C:/Users/VE-UGR-0208/Desktop/TFM/rTFM/Resultados_puntos_analisis.xlsx", sheet = 2)
df_area_usos20 <-read_excel("C:/Users/VE-UGR-0208/Desktop/TFM/rTFM/Resultados_puntos_analisis.xlsx", sheet = 3)
result_area84 <- df_area_usos84 %>%
group_by(datos$MUCVA__USO) %>%
summarise(Total_Area = sum(datos$))
summarise(Total_Area = sum(datos$)
result_area84 <- df_area_usos84 %>%
result_area84 <- df_area_usos84 %>%
summarise(Total_Area = sum(Shape_Area)
result_area84 <- df_area_usos84 %>%
result_area84 <- df_area_usos84 %>%
group_by(MUCVA__USO) %>%
summarise(Total_Area = sum(Shape_Area))
library(dplyr)
result_area84 <- df_area_usos84 %>%
group_by(MUCVA__USO) %>%
summarise(Total_Area = sum(Shape_Area))
result_area84 <- df_area_usos84 %>%
group_by(df_area_usos84$`_USOS_DEFI`) %>%
summarise(Total_Area = sum(Shape_Area))
result_area20 <- df_area_usos20 %>%
group_by(`_USOS_DEFI`) %>%
summarise(Total_Area = sum(AREA_POLIG))
View(result_area20)
View(result_area84)
df_area_usos84 <-read_excel("C:/Users/VE-UGR-0208/Desktop/TFM/rTFM/Resultados_puntos_analisis.xlsx", sheet = 2)
df_area_usos20 <-read_excel("C:/Users/VE-UGR-0208/Desktop/TFM/rTFM/Resultados_puntos_analisis.xlsx", sheet = 3)
result_area84 <- df_area_usos84 %>%
group_by(df_area_usos84$`_USOS_DEFI`) %>%
summarise(Total_Area = sum(AREA_POLIG))
result_area20 <- df_area_usos20 %>%
group_by(`_USOS_DEFI`) %>%
summarise(Total_Area = sum(AREA_POLIG))
# ABSOLUTO
ggplot(datos, aes(x = MUCVA__USO, fill = NOMBRE_HUM)) +
geom_bar(position = "stack") +  # Cambia "fill" por "stack" para contar valores absolutos
labs(title = "Número de hectáreas por uso del suelo en 1984 por humedal",
x = "Uso del suelo",
y = "Proporción") +
scale_fill_viridis_d(option = "H") + #B o H están bien, se distinguen los humedales
theme_minimal() +
theme(axis.text.x = element_text(angle = 270, vjust = 0.5, hjust = 0))
library(ggplot2)
# ABSOLUTO
ggplot(datos, aes(x = MUCVA__USO, fill = NOMBRE_HUM)) +
geom_bar(position = "stack") +  # Cambia "fill" por "stack" para contar valores absolutos
labs(title = "Número de hectáreas por uso del suelo en 1984 por humedal",
x = "Uso del suelo",
y = "Proporción") +
scale_fill_viridis_d(option = "H") + #B o H están bien, se distinguen los humedales
theme_minimal() +
theme(axis.text.x = element_text(angle = 270, vjust = 0.5, hjust = 0))
ggplot(datos, aes(x = SIOSE__USO, fill = NOMBRE_HUM)) +
geom_bar(position = "stack") +  # Cambia "fill" por "stack" para contar valores absolutos
labs(title = "Número de hectáreas por uso del suelo en la actualidad por humedal",
x = "Uso del suelo",
y = "Proporción") +
scale_fill_viridis_d(option = "H") + #B o H están bien, se distinguen los humedales
theme_minimal() +
theme(axis.text.x = element_text(angle = 270, vjust = 0.5, hjust=0))
# ABSOLUTO
ggplot(datos, aes(x = MUCVA__USO, fill = NOMBRE_HUM)) +
geom_bar(position = "stack") +  # Cambia "fill" por "stack" para contar valores absolutos
labs(title = "Número de hectáreas por uso del suelo en 1984 por humedal",
x = "Uso del suelo",
y = "Proporción") +
scale_fill_viridis_d(option = "H") + #B o H están bien, se distinguen los humedales
theme_minimal() +
theme(axis.text.x = element_text(angle = 270, vjust = 0.5, hjust = 0))
ggplot(datos, aes(x = SIOSE__USO, fill = NOMBRE_HUM)) +
geom_bar(position = "stack") +  # Cambia "fill" por "stack" para contar valores absolutos
labs(title = "Número de hectáreas por uso del suelo en la actualidad por humedal",
x = "Uso del suelo",
y = "Proporción") +
scale_fill_viridis_d(option = "H") + #B o H están bien, se distinguen los humedales
theme_minimal() +
theme(axis.text.x = element_text(angle = 270, vjust = 0.5, hjust=0))
# ABSOLUTO
ggplot(datos, aes(x = MUCVA__USO, fill = NOMBRE_HUM)) +
geom_bar(position = "stack") +  # Cambia "fill" por "stack" para contar valores absolutos
labs(title = "Número de hectáreas por uso del suelo en 1984 por humedal",
x = "Uso del suelo",
y = "Proporción") +
scale_fill_viridis_d(option = "H") + #B o H están bien, se distinguen los humedales
ylim(0, 900) +  # Establece el límite del eje y entre 0 y 900
theme_minimal() +
theme(axis.text.x = element_text(angle = 270, vjust = 0.5, hjust = 0))
ggplot(datos, aes(x = SIOSE__USO, fill = NOMBRE_HUM)) +
geom_bar(position = "stack") +  # Cambia "fill" por "stack" para contar valores absolutos
labs(title = "Número de hectáreas por uso del suelo en la actualidad por humedal",
x = "Uso del suelo",
y = "Proporción") +
scale_fill_viridis_d(option = "H") + #B o H están bien, se distinguen los humedales
ylim(0, 900) +  # Establece el límite del eje y entre 0 y 900
theme_minimal() +
theme(axis.text.x = element_text(angle = 270, vjust = 0.5, hjust=0))
# ABSOLUTO
ggplot(datos, aes(x = MUCVA__USO, fill = NOMBRE_HUM)) +
geom_bar(position = "stack") +  # Cambia "fill" por "stack" para contar valores absolutos
labs(title = "Número de hectáreas por uso del suelo en 1984 por humedal",
x = "Uso del suelo",
y = "Proporción") +
scale_fill_viridis_d(option = "H") + #B o H están bien, se distinguen los humedales
ylim(0, 900) +  # Establece el límite del eje y entre 0 y 900
theme_minimal() +
theme(axis.text.x = element_text(angle = 270, vjust = 0.5, hjust = 0))
ggplot(datos, aes(x = SIOSE__USO, fill = NOMBRE_HUM)) +
geom_bar(position = "stack") +  # Cambia "fill" por "stack" para contar valores absolutos
labs(title = "Número de hectáreas por uso del suelo en la actualidad por humedal",
x = "Uso del suelo",
y = "Proporción") +
scale_fill_viridis_d(option = "H") + #B o H están bien, se distinguen los humedales
ylim(0, 900) +  # Establece el límite del eje y entre 0 y 900
theme_minimal() +
theme(axis.text.x = element_text(angle = 270, vjust = 0.5, hjust=0))
# ABSOLUTO
ggplot(datos, aes(x = MUCVA__USO, fill = NOMBRE_HUM)) +
geom_bar(position = "stack") +  # Cambia "fill" por "stack" para contar valores absolutos
labs(title = "Número de hectáreas por uso del suelo en 1984 por humedal",
x = "Uso del suelo",
y = "Proporción") +
scale_fill_viridis_d(option = "H") + #B o H están bien, se distinguen los humedales
ylim(0, 900) +  # Establece el límite del eje y entre 0 y 900
theme_minimal() +
theme(axis.text.x = element_text(angle = 270, vjust = 0.5, hjust = 0))
# ABSOLUTO #####################################################################
ggplot(datos, aes(x = MUCVA__USO, fill = NOMBRE_HUM)) +
geom_bar(position = "stack") +  # Cambia "fill" por "stack" para contar valores absolutos
labs(title = "Número de hectáreas por uso del suelo en 1984 por humedal",
x = "Uso del suelo",
y = "Hectáreas") +
scale_fill_viridis_d(option = "H") + #B o H están bien, se distinguen los humedales
ylim(0, 900) +  # Establece el límite del eje y entre 0 y 900
theme_minimal() +
theme(axis.text.x = element_text(angle = 270, vjust = 0.5, hjust = 0))
# ABSOLUTO #####################################################################
ggplot(datos, aes(x = MUCVA__USO, fill = NOMBRE_HUM)) +
geom_bar(position = "stack") +  # Cambia "fill" por "stack" para contar valores absolutos
labs(title = "Número de hectáreas por uso del suelo en 1984 por humedal",
x = "Uso del suelo",
y = "Hectáreas") +
scale_fill_viridis_d(option = "H") + #B o H están bien, se distinguen los humedales
ylim(0, 800) +  # Establece el límite del eje y entre 0 y 800
theme_minimal() +
theme(axis.text.x = element_text(angle = 270, vjust = 0.5, hjust = 0))
ggplot(datos, aes(x = SIOSE__USO, fill = NOMBRE_HUM)) +
geom_bar(position = "stack") +  # Cambia "fill" por "stack" para contar valores absolutos
labs(title = "Número de hectáreas por uso del suelo en la actualidad por humedal",
x = "Uso del suelo",
y = "Hectáreas") +
scale_fill_viridis_d(option = "H") + #B o H están bien, se distinguen los humedales
ylim(0, 800) +  # Establece el límite del eje y entre 0 y 800
theme_minimal() +
theme(axis.text.x = element_text(angle = 270, vjust = 0.5, hjust=0))
################################################################################
# Gráfico de barras apiladas para mostrar la proporción de cada uso del suelo por humedal RELATIVO
ggplot(datos, aes(x = MUCVA__USO, fill = NOMBRE_HUM)) +
geom_bar(position = "fill") +
labs(title = "Proporción de usos del suelo en 1984 por humedal",
x = "Uso del suelo",
y = "Proporción") +
scale_fill_viridis_d(option = "H") + #B o H están bien, se distinguen los humedales
theme_minimal() +
theme(axis.text.x = element_text(angle = 270, vjust = 0.5, hjust = 0))
summary(df_area_usos84)
head(df_area_usos84)
View(df_area_usos84)
View(datos)
# Leer los archivos
datos <-read_excel("C:/Users/VE-UGR-0208/Desktop/TFM/rTFM/Resultados_puntos_analisis.xlsx", range = "A1:O2081")
summary(datos)
head(datos)
pie(table(datos_comp$COMPARACION))
# Leer los archivos
datos_comp <-read_excel("C:/Users/VE-UGR-0208/Desktop/TFM/rTFM/Resultados_puntos_analisis.xlsx", range = "A1:O2081")
head(datos_comp)
df_area_usos84 <-read_excel("C:/Users/VE-UGR-0208/Desktop/TFM/rTFM/Resultados_puntos_analisis.xlsx", sheet = 2)
df_area_usos20 <-read_excel("C:/Users/VE-UGR-0208/Desktop/TFM/rTFM/Resultados_puntos_analisis.xlsx", sheet = 3)
pie(table(datos_comp$COMPARACION))
pie(table(datos_comp$MUCVA__USO)) #Usos 1984
pie(table(datos_comp$SIOSE__USO)) #Usos 2023
################################################################################
# Filtrar datos dentro y fuera de humedales
dentro_humedales <- datos_comp %>% filter(ZONA == "Humedal")
fuera_humedales <- datos_comp %>% filter(ZONA != "Humedal")
# Filtrar humedales costeros e interiores
humedales_costeros <- dentro_humedales %>% filter(GRUPO_TIPO == "Costeros")
humedales_interior <- dentro_humedales %>% filter(GRUPO_TIPO != "Costeros")
# Contar los registros en cada grupo
count_humedales <- datos_comp %>%
group_by(ZONA, GRUPO_TIPO) %>%
summarize(n = n())
print(count_humedales)
# Gráfico de barras para comparar las zonas
ggplot(count_humedales, aes(x = GRUPO_TIPO, y = n, fill = ZONA)) +
geom_bar(stat = "identity", position = "dodge") +
labs(title = "Comparación de Zonas y Tipos de Humedales",
x = "Tipo de Humedal", y = "Número de Registros") +
theme_minimal()
###############################################################################
# Agrupar por ZONA y COMPARACION, y contar las ocurrencias
comparacion_resumen <- datos_comp %>%
group_by(ZONA, COMPARACION) %>%
summarize(count = n()) %>%
ungroup()
print(comparacion_resumen)
# Calcular proporciones
comparacion_proporciones <- comparacion_resumen %>%
group_by(ZONA) %>%
mutate(proporcion = count / sum(count))
print(comparacion_proporciones)
# Gráfico de barras apiladas
ggplot(comparacion_proporciones, aes(x = ZONA, y = proporcion, fill = COMPARACION)) +
geom_bar(stat = "identity") +
labs(title = "Comparación de Cambios de Uso del Suelo Dentro y Fuera de Humedales",
x = "Zona (Dentro/Fuera del Humedal)", y = "Proporción") +
scale_y_continuous(labels = scales::percent_format()) +
theme_minimal()
# Gráfico de barras con proporciones relativas
ggplot(comparacion_proporciones, aes(x = ZONA, y = proporcion, fill = COMPARACION)) +
geom_bar(stat = "identity", position = "fill") +
labs(title = "Proporciones Relativas de Cambios de Uso del Suelo",
x = "Zona (Dentro/Fuera del Humedal)", y = "Proporción Relativa") +
scale_y_continuous(labels = scales::percent_format()) +
theme_minimal()
# Gráfico de barras agrupadas
ggplot(comparacion_proporciones, aes(x = ZONA, y = proporcion, fill = COMPARACION)) +
geom_bar(stat = "identity", position = "dodge") +
labs(title = "Comparación de Cambios de Uso del Suelo Dentro y Fuera de Humedales",
x = "Zona (Dentro/Fuera del Humedal)", y = "Proporción") +
scale_y_continuous(labels = scales::percent_format()) +
theme_minimal()
# Gráfico de barras con proporciones relativas
ggplot(comparacion_proporciones, aes(x = ZONA, y = proporcion, fill = COMPARACION)) +
geom_bar(stat = "identity", position = "fill") +
labs(title = "Proporciones Relativas de Cambios de Uso del Suelo",
x = "Zona (Dentro/Fuera del Humedal)", y = "Proporción Relativa") +
scale_y_continuous(labels = scales::percent_format()) +
theme_minimal()
# Gráfico de barras apiladas
ggplot(comparacion_proporciones, aes(x = ZONA, y = proporcion, fill = COMPARACION)) +
geom_bar(stat = "identity") +
labs(title = "Comparación de Cambios de Uso del Suelo Dentro y Fuera de Humedales",
x = "Zona (Dentro/Fuera del Humedal)", y = "Proporción") +
scale_y_continuous(labels = scales::percent_format()) +
theme_minimal()
# Para evaluar los cambios específicos de uso del suelo ########################
# Crear una columna que muestre el cambio de uso del suelo
data <- data %>%
mutate(cambio_uso = paste(MUCVA__USO, "a", SIOSE__USO))
# Leer los archivos
data <-read_excel("C:/Users/VE-UGR-0208/Desktop/TFM/rTFM/Resultados_puntos_analisis.xlsx", range = "A1:O2081")
# Para evaluar los cambios específicos de uso del suelo ########################
# Crear una columna que muestre el cambio de uso del suelo
datos <- data %>%
mutate(cambio_uso = paste(MUCVA__USO, "a", SIOSE__USO))
# Ver los primeros registros para confirmar
head(data)
# Ver los primeros registros para confirmar
head(datos)
# Ver los primeros registros para confirmar
head(datos)
# Agrupar por zona y tipo de cambio de uso del suelo, y contar las ocurrencias
cambio_uso_resumen <- data %>%
group_by(ZONA, cambio_uso) %>%
summarize(count = n()) %>%
ungroup()
# Para evaluar los cambios específicos de uso del suelo ########################
# Crear una columna que muestre el cambio de uso del suelo
data <- datos %>%
mutate(cambio_uso = paste(MUCVA__USO, "a", SIOSE__USO))
# Ver los primeros registros para confirmar
head(data)
# Agrupar por zona y tipo de cambio de uso del suelo, y contar las ocurrencias
cambio_uso_resumen <- data %>%
group_by(ZONA, cambio_uso) %>%
summarize(count = n()) %>%
ungroup()
# Ver los resultados
print(cambio_uso_resumen)
# Gráfico de barras apiladas por tipo de cambio
ggplot(cambio_uso_resumen, aes(x = ZONA, y = count, fill = cambio_uso)) +
geom_bar(stat = "identity") +
labs(title = "Cambios de Uso del Suelo Dentro y Fuera de Humedales",
x = "Zona (Dentro/Fuera del Humedal)", y = "Número de Cambios") +
theme_minimal()
# Gráfico de barras agrupadas
ggplot(cambio_uso_resumen, aes(x = cambio_uso, y = count, fill = ZONA)) +
geom_bar(stat = "identity", position = "dodge") +
labs(title = "Cambios Específicos de Uso del Suelo por Zona",
x = "Cambio de Uso del Suelo", y = "Número de Cambios") +
theme_minimal() +
theme(axis.text.x = element_text(angle = 45, hjust = 1))
# Gráfico de barras horizontales
ggplot(cambio_uso_resumen, aes(x = count, y = reorder(cambio_uso, count))) +
geom_bar(stat = "identity", fill = "steelblue") +
labs(title = "Cambios de Uso del Suelo",
x = "Número de Cambios", y = "Cambio de Uso del Suelo") +
theme_minimal()
# Crear una nueva categoría "Otros" para cambios poco frecuentes
cambio_uso_resumen_simplificado <- cambio_uso_resumen %>%
mutate(cambio_uso = ifelse(count < umbral, "Otros", cambio_uso)) %>%
group_by(cambio_uso) %>%
summarize(count = sum(count)) %>%
ungroup() %>%
arrange(count)
# Gráfico de barras horizontales con categorías simplificadas
ggplot(cambio_uso_resumen_simplificado, aes(x = count, y = reorder(cambio_uso, count))) +
geom_bar(stat = "identity", fill = "steelblue") +
labs(title = "Cambios de Uso del Suelo (Agrupados)",
x = "Número de Cambios", y = "Cambio de Uso del Suelo") +
theme_minimal()
# Crear una nueva categoría "Otros" para cambios poco frecuentes
cambio_uso_resumen_simplificado <- cambio_uso_resumen %>%
mutate(cambio_uso = ifelse(count < umbral, "Otros", cambio_uso)) %>%
group_by(cambio_uso) %>%
summarize(count = sum(count)) %>%
ungroup() %>%
arrange(count)
# Definir un umbral para agrupar categorías menos frecuentes
umbral <- 5
# Crear una nueva categoría "Otros" para cambios poco frecuentes
cambio_uso_resumen_simplificado <- cambio_uso_resumen %>%
mutate(cambio_uso = ifelse(count < umbral, "Otros", cambio_uso)) %>%
group_by(cambio_uso) %>%
summarize(count = sum(count)) %>%
ungroup() %>%
arrange(count)
# Gráfico de barras horizontales con categorías simplificadas
ggplot(cambio_uso_resumen_simplificado, aes(x = count, y = reorder(cambio_uso, count))) +
geom_bar(stat = "identity", fill = "steelblue") +
labs(title = "Cambios de Uso del Suelo (Agrupados)",
x = "Número de Cambios", y = "Cambio de Uso del Suelo") +
theme_minimal()
# SOLO CAMBIOS (COMPARACION = DISTINTO) ########################################
# Filtrar los datos para obtener solo los cambios distintos
data_distintos <- data %>%
filter(COMPARACION == "DISTINTO")
# SOLO CAMBIOS (COMPARACION = DISTINTO) ########################################
# Filtrar los datos para obtener solo los cambios distintos
data_distintos <- data %>%
filter(COMPARACION == "DISTINTO")
# Crear una columna que muestre el cambio de uso del suelo
data_distintos <- data_distintos %>%
mutate(cambio_uso = paste(MUCVA__USO, "a", SIOSE__USO))
# Agrupar por tipo de cambio de uso del suelo y contar las ocurrencias
cambio_uso_resumen <- data_distintos %>%
group_by(cambio_uso) %>%
summarize(count = n()) %>%
ungroup()
# Ver los resultados
print(cambio_uso_resumen)
# Gráfico de barras horizontales para cambios distintos
ggplot(cambio_uso_resumen, aes(x = count, y = reorder(cambio_uso, count))) +
geom_bar(stat = "identity", fill = "steelblue") +
labs(title = "Cambios de Uso del Suelo (DISTINTO)",
x = "Número de Cambios", y = "Cambio de Uso del Suelo") +
theme_minimal()
# Mostrar solo las 10 categorías más comunes
top_cambios <- cambio_uso_resumen %>%
top_n(10, count)
# Gráfico de barras horizontales con las 10 categorías más comunes
ggplot(top_cambios, aes(x = count, y = reorder(cambio_uso, count))) +
geom_bar(stat = "identity", fill = "steelblue") +
labs(title = "Top 10 Cambios de Uso del Suelo (DISTINTO)",
x = "Número de Cambios", y = "Cambio de Uso del Suelo") +
theme_minimal()
# Definir un umbral para agrupar categorías menos frecuentes
umbral <- 5
# Crear una nueva categoría "Otros" para cambios poco frecuentes
cambio_uso_resumen_simplificado <- cambio_uso_resumen %>%
mutate(cambio_uso = ifelse(count < umbral, "Otros", cambio_uso)) %>%
group_by(cambio_uso) %>%
summarize(count = sum(count)) %>%
ungroup() %>%
arrange(count)
# Gráfico de barras horizontales con categorías simplificadas
ggplot(cambio_uso_resumen_simplificado, aes(x = count, y = reorder(cambio_uso, count))) +
geom_bar(stat = "identity", fill = "steelblue") +
labs(title = "Cambios de Uso del Suelo (DISTINTO, Agrupados)",
x = "Número de Cambios", y = "Cambio de Uso del Suelo") +
theme_minimal()
### Gráfico proporciones
# Agrupar por tipo de cambio de uso del suelo y contar las ocurrencias
cambio_uso_resumen <- data_distintos %>%
group_by(cambio_uso) %>%
summarize(count = n()) %>%
ungroup()
# Calcular la proporción de cada tipo de cambio
cambio_uso_resumen <- cambio_uso_resumen %>%
mutate(proporcion = count / sum(count))
# Ver los resultados
print(cambio_uso_resumen)
# Gráfico de barras horizontales mostrando proporciones
ggplot(cambio_uso_resumen, aes(x = proporcion, y = reorder(cambio_uso, proporcion))) +
geom_bar(stat = "identity", fill = "steelblue") +
scale_x_continuous(labels = scales::percent_format()) +
labs(title = "Proporción de Cambios de Uso del Suelo (DISTINTO)",
x = "Proporción", y = "Cambio de Uso del Suelo") +
theme_minimal()
# Gráfico de barras apiladas con proporciones relativas
ggplot(cambio_uso_resumen_relat, aes(x = "", y = proporcion_relativa, fill = cambio_uso)) +
geom_bar(stat = "identity") +
coord_polar("y", start = 0) +
scale_y_continuous(labels = scales::percent_format()) +
labs(title = "Proporción de Cambios de Uso del Suelo (DISTINTO)",
x = "", y = "Proporción") +
theme_minimal() +
theme(axis.text.x = element_blank())
# Crear un dataframe para las proporciones relativas
cambio_uso_resumen_relat <- cambio_uso_resumen %>%
mutate(proporcion_relativa = proporcion)
# Gráfico de barras apiladas con proporciones relativas
ggplot(cambio_uso_resumen_relat, aes(x = "", y = proporcion_relativa, fill = cambio_uso)) +
geom_bar(stat = "identity") +
coord_polar("y", start = 0) +
scale_y_continuous(labels = scales::percent_format()) +
labs(title = "Proporción de Cambios de Uso del Suelo (DISTINTO)",
x = "", y = "Proporción") +
theme_minimal() +
theme(axis.text.x = element_blank())
# Gráfico de pie mostrando proporciones
ggplot(cambio_uso_resumen, aes(x = "", y = proporcion, fill = cambio_uso)) +
geom_bar(stat = "identity", width = 1) +
coord_polar("y", start = 0) +
scale_y_continuous(labels = scales::percent_format()) +
labs(title = "Proporción de Cambios de Uso del Suelo (DISTINTO)",
x = "", y = "Proporción") +
theme_minimal() +
theme(axis.text.x = element_blank())
