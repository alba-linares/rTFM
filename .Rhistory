main = "Área de los usos del suelo fuera del humedal en 2020",
labels_row = areas_siose_gen_x_hum_percent_usos_B$HUMEDAL,
display_numbers = TRUE,
number_color = "black",
cluster_cols = F,  # Mantiene el orden original de las columnas
angle_col = 45,    # Inclina los nombres de las columnas 45 grados
fontsize_number = 8)
areas_dif_gen_x_hum_percent_usos_B$HUMEDAL<-as.factor(areas_dif_gen_x_hum_percent_usos_B$HUMEDAL)
pheatmap(areas_dif_gen_x_hum_percent_usos_B[2:6],
main = "Cambios en el área de los usos del suelo fuera del humedal entre 1984-2020",
labels_row = areas_dif_gen_x_hum_percent_usos_B$HUMEDAL,
display_numbers = TRUE,
number_color = "black",
cluster_cols = F,  # Mantiene el orden original de las columnas
angle_col = 45,    # Inclina los nombres de las columnas 45 grados
fontsize_number = 8)
areas_mucva_gen_x_hum_percent_usos_B$HUMEDAL<-as.factor(areas_mucva_gen_x_hum_percent_usos_B$HUMEDAL)
pheatmap(areas_mucva_gen_x_hum_percent_usos_B[2:6],
main = "Área de los usos del suelo fuera del humedal en 1984",
labels_row = areas_mucva_gen_x_hum_percent_usos_B$HUMEDAL,
display_numbers = TRUE,
number_color = "black",
cluster_cols = F,  # Mantiene el orden original de las columnas
angle_col = 45,    # Inclina los nombres de las columnas 45 grados
fontsize_number = 8)
pheatmap(areas_siose_gen_x_hum_percent_usos_B[2:6],
main = "Área de los usos del suelo fuera del humedal en 2020",
labels_row = areas_siose_gen_x_hum_percent_usos_B$HUMEDAL,
display_numbers = TRUE,
number_color = "black",
cluster_cols = F,  # Mantiene el orden original de las columnas
angle_col = 45,    # Inclina los nombres de las columnas 45 grados
fontsize_number = 8)
areas_dif_gen_x_hum_percent_usos_B$HUMEDAL<-as.factor(areas_dif_gen_x_hum_percent_usos_B$HUMEDAL)
pheatmap(areas_dif_gen_x_hum_percent_usos_B[2:6],
main = "Cambios en el área de los usos del suelo fuera del humedal entre 1984-2020",
labels_row = areas_dif_gen_x_hum_percent_usos_B$HUMEDAL,
display_numbers = TRUE,
number_color = "black",
cluster_cols = F,  # Mantiene el orden original de las columnas
angle_col = 45,    # Inclina los nombres de las columnas 45 grados
fontsize_number = 8)
pheatmap(areas_mucva_gen_x_hum_percent_usos_B[2:6],
main = "Área de los usos del suelo fuera del humedal en 1984",
labels_row = areas_mucva_gen_x_hum_percent_usos_B$HUMEDAL,
display_numbers = TRUE,
number_color = "black",
cluster_cols = F,  # Mantiene el orden original de las columnas
angle_col = 45,    # Inclina los nombres de las columnas 45 grados
fontsize_number = 8)
pheatmap(areas_siose_gen_x_hum_percent_usos_B[2:6],
main = "Área de los usos del suelo fuera del humedal en 2020",
labels_row = areas_siose_gen_x_hum_percent_usos_B$HUMEDAL,
display_numbers = TRUE,
number_color = "black",
cluster_cols = F,  # Mantiene el orden original de las columnas
angle_col = 45,    # Inclina los nombres de las columnas 45 grados
fontsize_number = 8)
# Estos gráficos representan los usos del suelo (DENTRO DEL HUMEDAL):
colnames(areas_siose_gen_x_hum_percent_usos_H) <- colnames(areas_dif_gen_x_hum_usos)
areas_siose_gen_x_hum_percent_usos_H$HUMEDAL<-as.factor(areas_siose_gen_x_hum_percent_usos_H$HUMEDAL)
pheatmap(areas_siose_gen_x_hum_percent_usos_H[2:6],
main = "Área de los usos del suelo dentro del humedal en 2020",
labels_row = areas_siose_gen_x_hum_percent_usos_H$HUMEDAL,
display_numbers = TRUE,
number_color = "black",
cluster_cols = F,  # Mantiene el orden original de las columnas
angle_col = 45,    # Inclina los nombres de las columnas 45 grados
fontsize_number = 8)
colnames(areas_mucva_gen_x_hum_percent_usos_H) <- colnames(areas_dif_gen_x_hum_usos)
areas_mucva_gen_x_hum_percent_usos_H$HUMEDAL<-as.factor(areas_mucva_gen_x_hum_percent_usos_H$HUMEDAL)
pheatmap(areas_mucva_gen_x_hum_percent_usos_H[2:6],
main = "Área de los usos del suelo dentro del humedal en 1984",
labels_row = areas_mucva_gen_x_hum_percent_usos_H$HUMEDAL,
display_numbers = TRUE,
number_color = "black",
cluster_cols = F,  # Mantiene el orden original de las columnas
angle_col = 45,    # Inclina los nombres de las columnas 45 grados
fontsize_number = 8)
# Este gráfico representa los cambios de usos del suelo (DENTRO DEL HUMEDAL):
colnames(areas_dif_gen_x_hum_percent_usos_H) <- colnames(areas_dif_gen_x_hum_usos)
areas_dif_gen_x_hum_percent_usos_H$HUMEDAL<-as.factor(areas_dif_gen_x_hum_percent_usos_H$HUMEDAL)
pheatmap(areas_dif_gen_x_hum_percent_usos_H[2:6],
main = "Cambios en el área de los usos del suelo dentro del humedal entre 1984-2020",
labels_row = areas_dif_gen_x_hum_percent_usos_H$HUMEDAL,
display_numbers = TRUE,
number_color = "black",
cluster_cols = F,  # Mantiene el orden original de las columnas
angle_col = 45,    # Inclina los nombres de las columnas 45 grados
fontsize_number = 8)
# Estos gráficos representan los usos del suelo con un área significativamente distinta:
areas_siose_gen_x_hum_percent_usos$HUMEDAL<-as.factor(areas_siose_gen_x_hum_percent_usos$HUMEDAL)
pheatmap(areas_siose_gen_x_hum_percent_usos[2:6],
main = "Área de los usos del suelo en 2020",
labels_row = areas_siose_gen_x_hum_percent_usos$HUMEDAL,
display_numbers = TRUE,
number_color = "black",
cluster_cols = F,  # Mantiene el orden original de las columnas
angle_col = 45,    # Inclina los nombres de las columnas 45 grados
fontsize_number = 8)
colnames(areas_siose_gen_x_hum_percent_usos) <- colnames(areas_dif_gen_x_hum_usos)
colnames(areas_mucva_gen_x_hum_percent_usos) <- colnames(areas_dif_gen_x_hum_usos)
# Este gráfico representa los cambios de usos del suelo:
colnames(areas_dif_gen_x_hum_percent_usos) <- colnames(areas_dif_gen_x_hum_usos)
pheatmap(areas_dif_gen_x_hum_percent_usos[2:6],
main = "Cambio en el área de los usos del suelo entre 1984-2020",
labels_row = areas_dif_gen_x_hum_percent_usos$HUMEDAL,
display_numbers = TRUE,
number_color = "black",
cluster_cols = F,  # Mantiene el orden original de las columnas
angle_col = 45,    # Inclina los nombres de las columnas 45 grados
fontsize_number = 8)
areas_dif_gen_x_hum_percent_usos_B$HUMEDAL<-as.factor(areas_dif_gen_x_hum_percent_usos_B$HUMEDAL)
pheatmap(areas_dif_gen_x_hum_percent_usos_B[2:6],
main = "Cambios en el área de los usos del suelo fuera del humedal entre 1984-2020",
labels_row = areas_dif_gen_x_hum_percent_usos_B$HUMEDAL,
display_numbers = TRUE,
number_color = "black",
cluster_cols = F,  # Mantiene el orden original de las columnas
angle_col = 45,    # Inclina los nombres de las columnas 45 grados
fontsize_number = 8)
pheatmap(areas_dif_gen_x_hum_usos_B[2:6],
main = "Cambios en el área de los usos del suelo fuera del humedal entre 1984-2020",
labels_row = areas_dif_gen_x_hum_usos_B$HUMEDAL,
display_numbers = TRUE,
number_color = "black",
cluster_cols = F,  # Mantiene el orden original de las columnas
angle_col = 45,    # Inclina los nombres de las columnas 45 grados
fontsize_number = 8)
#Y POR CADA HUMEDAL (EN BUFFER)
areas_mucva_gen_x_hum_B <- datos_mucva %>%
group_by(HUMEDAL, USOS_GENERAL) %>%  # Agrupa por humedal y uso general
summarise(SUMA_AREAS = sum(AREA_USOS_BUFFER, na.rm = TRUE))  # Sumar las áreas por grupo
areas_mucva_gen_x_hum_B_usos <- pivot_wider(areas_mucva_gen_x_hum_B,names_from = USOS_GENERAL, values_from = SUMA_AREAS)
areas_siose_gen_x_hum_B <- datos_siose %>%
group_by(HUMEDAL, USOS_GENERAL) %>%  # Agrupa por humedal y uso general
summarise(SUMA_AREAS = sum(AREA_USOS_BUFFER, na.rm = TRUE))  # Sumar las áreas por grupo
areas_siose_gen_x_hum_B_usos <- pivot_wider(areas_siose_gen_x_hum_B,names_from = USOS_GENERAL, values_from = SUMA_AREAS)
areas_dif_gen_x_hum_B <- datos_dif %>%
group_by(HUMEDAL, USOS_GENERAL) %>%  # Agrupa por humedal y uso general
summarise(SUMA_AREAS = sum(AREA_USOS_BUFFER, na.rm = TRUE))  # Sumar las áreas por grupo
areas_dif_gen_x_hum_B_usos <- pivot_wider(areas_dif_gen_x_hum_B,names_from = USOS_GENERAL, values_from = SUMA_AREAS)
areas_dif_gen_x_hum_B_usos
# Voy a recalcular areas_dif
M <- matrix (data=NA, 12, 6)
M<-as.data.frame(M)
for (i in 1:nrow(areas_siose_gen_x_hum_usos_B)) {
for (j in 1:ncol(areas_siose_gen_x_hum_usos_B)) {
M[i, j] <- areas_siose_gen_x_hum_usos_B[i, j] - areas_mucva_gen_x_hum_usos_B[i, j]
}
}
for (i in 1:nrow(areas_siose_gen_x_hum_usos_B)) {
for (j in 1:ncol(areas_siose_gen_x_hum_usos_B)) {
M[i, j] <- areas_siose_gen_x_hum_B_usos[i, j] - areas_mucva_gen_x_hum_B_usos[i, j]
}
}
for (i in 1:nrow(areas_siose_gen_x_hum_B_usos)) {
for (j in 1:ncol(areas_siose_gen_x_hum_B_usos)) {
M[i, j] <- areas_siose_gen_x_hum_B_usos[i, j] - areas_mucva_gen_x_hum_B_usos[i, j]
}
}
M[, 1] <- areas_siose_gen_x_hum_B_usos[, 1]
colnames(M)<-colnames(areas_siose_gen_x_hum_usos_B)
colnames(M)<-colnames(areas_siose_gen_x_hum_B_usos)
areas_dif_gen_x_hum_usos_B <- M
areas_dif_gen_x_hum_usos_B
# Para SOLO buffer:
M <- matrix (data=NA, 12, 6)
M<-as.data.frame(M)
for (i in 1:nrow(areas_siose_gen_x_hum_percent_usos_H)) {
for (j in 1:ncol(areas_siose_gen_x_hum_percent_usos_H)) {
M[i, j] <- areas_siose_gen_x_hum_percent_usos_H[i, j] - areas_mucva_gen_x_hum_percent_usos_H[i, j]
}
}
M[, 1] <- areas_siose_gen_x_hum_percent_usos_H[, 1]
colnames(M)<-colnames(areas_siose_gen_x_hum_percent_usos_H)
areas_dif_gen_x_hum_percent_usos_H <- M
areas_dif_gen_x_hum_percent_usos_H
# Voy a recalcular areas_dif
M <- matrix (data=NA, 12, 6)
M<-as.data.frame(M)
for (i in 1:nrow(areas_siose_gen_x_hum_H_usos)) {
for (j in 1:ncol(areas_siose_gen_x_hum_H_usos)) {
M[i, j] <- areas_siose_gen_x_hum_H_usos[i, j] - areas_mucva_gen_x_hum_H_usos[i, j]
}
}
M<-as.data.frame(M)
for (i in 1:nrow(areas_siose_gen_x_hum_usos_H)) {
for (j in 1:ncol(areas_siose_gen_x_hum_usos_H)) {
M[i, j] <- areas_siose_gen_x_hum_usos_H[i, j] - areas_mucva_gen_x_hum_usos_H[i, j]
}
}
#Y POR CADA HUMEDAL (SOLO DENTRO DEL HUMEDAL)
areas_mucva_gen_x_hum_H <- datos_mucva %>%
group_by(HUMEDAL, USOS_GENERAL) %>%  # Agrupa por humedal y uso general
summarise(SUMA_AREAS = sum(AREA_USOS_HUMEDAL, na.rm = TRUE))  # Sumar las áreas por grupo
areas_mucva_gen_x_hum_H_usos <- pivot_wider(areas_mucva_gen_x_hum_H,names_from = USOS_GENERAL, values_from = SUMA_AREAS)
areas_siose_gen_x_hum_H <- datos_siose %>%
group_by(HUMEDAL, USOS_GENERAL) %>%  # Agrupa por humedal y uso general
summarise(SUMA_AREAS = sum(AREA_USOS_HUMEDAL, na.rm = TRUE))  # Sumar las áreas por grupo
areas_siose_gen_x_hum_H_usos <- pivot_wider(areas_siose_gen_x_hum_H,names_from = USOS_GENERAL, values_from = SUMA_AREAS)
areas_dif_gen_x_hum_H <- datos_dif %>%
group_by(HUMEDAL, USOS_GENERAL) %>%  # Agrupa por humedal y uso general
summarise(SUMA_AREAS = sum(AREA_USOS_HUMEDAL, na.rm = TRUE))  # Sumar las áreas por grupo
areas_dif_gen_x_hum_H_usos <- pivot_wider(areas_dif_gen_x_hum_H,names_from = USOS_GENERAL, values_from = SUMA_AREAS)
# Voy a recalcular areas_dif
M <- matrix (data=NA, 12, 6)
M<-as.data.frame(M)
for (i in 1:nrow(areas_siose_gen_x_hum_H_usos)) {
for (j in 1:ncol(areas_siose_gen_x_hum_H_usos)) {
M[i, j] <- areas_siose_gen_x_hum_H_usos[i, j] - areas_mucva_gen_x_hum_H_usos[i, j]
}
}
M[, 1] <- areas_siose_gen_x_hum_H_usos[, 1]
colnames(M)<-colnames(areas_siose_gen_x_hum_H_usos)
areas_dif_gen_x_hum_usos_H <- M
areas_dif_gen_x_hum_usos_H
pheatmap(areas_dif_gen_x_hum_percent_usos_B[2:6],
main = "Cambios en el área de los usos del suelo fuera del humedal entre 1984-2020",
labels_row = areas_dif_gen_x_hum_percent_usos_B$HUMEDAL,
display_numbers = TRUE,
number_color = "black",
cluster_cols = F,  # Mantiene el orden original de las columnas
angle_col = 45,    # Inclina los nombres de las columnas 45 grados
fontsize_number = 8)
areas_siose_gen_x_hum_percent <- areas_siose_gen_x_hum_percent %>%
group_by(HUMEDAL) %>%  # Agrupar por cada humedal
mutate(TOTAL_AREA_HUMEDAL = sum(AREA_USOS)) %>%  # Calcular el total del área para cada humedal
mutate(PORCENTAJE = (AREA_USOS / TOTAL_AREA_HUMEDAL) * 100) %>%  # Calcular el porcentaje para cada categoría de uso de suelo dentro del humedal
ungroup()  # Desagrupar para evitar problemas en operaciones posteriores
############### PARA SIOSE######################################################################################################################################
# Agrupar por USOS_GENERAL y humedal, y sumar las áreas
areas_siose_gen_x_hum_percent <- datos_siose %>%
group_by(USOS_GENERAL, HUMEDAL) %>%
summarise(AREA_USOS = sum(AREA_USOS)) %>%
ungroup()
################################################################################
#PRUEBA
################################################################################
areas_siose_gen_x_hum_percent <- areas_siose_gen_x_hum_percent %>%
group_by(HUMEDAL) %>%  # Agrupar por cada humedal
mutate(TOTAL_AREA_HUMEDAL = sum(AREA_USOS)) %>%  # Calcular el total del área para cada humedal
mutate(PORCENTAJE = (AREA_USOS / TOTAL_AREA_HUMEDAL) * 100) %>%  # Calcular el porcentaje para cada categoría de uso de suelo dentro del humedal
ungroup()  # Desagrupar para evitar problemas en operaciones posteriores
areas_siose_gen_x_hum_percent
# Separar los porcentajes en columnas de usos del suelo por humedal
areas_siose_gen_x_hum_percent$HUMEDAL<-as.factor(areas_siose_gen_x_hum_percent$HUMEDAL)
areas_siose_gen_x_hum_percent_usos <- pivot_wider(areas_siose_gen_x_hum_percent,names_from = USOS_GENERAL, values_from = PORCENTAJE)
areas_siose_gen_x_hum_percent_usos <- areas_siose_gen_x_hum_percent_usos %>%
group_by(HUMEDAL) %>%
summarise(
total_agrario = sum(`Agrario`, na.rm = TRUE),
total_agrario_invernaderos = sum(`Agrario invernaderos`, na.rm = TRUE),
total_cobertura_vegetal = sum(`Cobertura vegetal y suelos`, na.rm = TRUE),
total_urbano_infraestructuras = sum(`Urbano e infraestructuras`, na.rm = TRUE),
total_zonas_humedas = sum(`Zonas humedas`, na.rm = TRUE)
)
# Para SOLO humedal (_H)
areas_siose_gen_x_hum_percent <- datos_siose %>%
group_by(USOS_GENERAL, HUMEDAL) %>%
summarise(AREA_USOS_HUMEDAL = sum(AREA_USOS_HUMEDAL)) %>%
ungroup()
total_areas_siose_gen_x_hum_percent <- sum(areas_siose_gen_x_hum_percent$AREA_USOS_HUMEDAL) # Calcular el total de todas las áreas
areas_siose_gen_x_hum_percent_usos
View(areas_siose_gen_x_hum_percent_usos)
# Para SOLO humedal (_H)
areas_siose_gen_x_hum_percent <- datos_siose %>%
group_by(USOS_GENERAL, HUMEDAL) %>%
summarise(AREA_USOS_HUMEDAL = sum(AREA_USOS_HUMEDAL)) %>%
ungroup()
areas_mucva_gen_x_hum_percent <- areas_mucva_gen_x_hum_percent %>%
group_by(HUMEDAL) %>%  # Agrupar por cada humedal
mutate(TOTAL_AREA_HUMEDAL = sum(AREA_USOS)) %>%  # Calcular el total del área para cada humedal
mutate(PORCENTAJE = (AREA_USOS / TOTAL_AREA_HUMEDAL) * 100) %>%  # Calcular el porcentaje para cada categoría de uso de suelo dentro del humedal
ungroup()  # Desagrupar para evitar problemas en operaciones posteriores
siose
# Separar los porcentajes en columnas de usos del suelo por humedal
areas_siose_gen_x_hum_percent$HUMEDAL<-as.factor(areas_siose_gen_x_hum_percent$HUMEDAL)
# Separar los porcentajes en columnas de usos del suelo por humedal
areas_siose_gen_x_hum_percent$HUMEDAL<-as.factor(areas_siose_gen_x_hum_percent$HUMEDAL)
areas_siose_gen_x_hum_percent_usos_B <- pivot_wider(areas_siose_gen_x_hum_percent,names_from = USOS_GENERAL, values_from = PORCENTAJE)
areas_siose_gen_x_hum_percent <- areas_siose_gen_x_hum_percent %>%
group_by(HUMEDAL) %>%  # Agrupar por cada humedal
mutate(TOTAL_AREA_HUMEDAL = sum(AREA_USOS_HUMEDAL)) %>%  # Calcular el total del área para cada humedal
mutate(PORCENTAJE = (AREA_USOS_HUMEDAL / TOTAL_AREA_HUMEDAL) * 100) %>%  # Calcular el porcentaje para cada categoría de uso de suelo dentro del humedal
ungroup()  # Desagrupar para evitar problemas en operaciones posteriores
# Separar los porcentajes en columnas de usos del suelo por humedal
areas_siose_gen_x_hum_percent$HUMEDAL<-as.factor(areas_siose_gen_x_hum_percent$HUMEDAL)
areas_siose_gen_x_hum_percent_usos_H <- pivot_wider(areas_siose_gen_x_hum_percent,names_from = USOS_GENERAL, values_from = PORCENTAJE)
areas_siose_gen_x_hum_percent_usos_H <- areas_siose_gen_x_hum_percent_usos_H %>%
group_by(HUMEDAL) %>%
summarise(
total_AREA_USOS_HUMEDAL_agrario = sum(`Agrario`, na.rm = TRUE),
total_agrario_invernaderos = sum(`Agrario invernaderos`, na.rm = TRUE),
total_cobertura_vegetal = sum(`Cobertura vegetal y suelos`, na.rm = TRUE),
total_urbano_infraestructuras = sum(`Urbano e infraestructuras`, na.rm = TRUE),
total_zonas_humedas = sum(`Zonas humedas`, na.rm = TRUE)
)
# Para SOLO buffer (_B)
areas_siose_gen_x_hum_percent <- datos_siose %>%
group_by(USOS_GENERAL, HUMEDAL) %>%
summarise(AREA_USOS_BUFFER = sum(AREA_USOS_BUFFER)) %>%
ungroup()
areas_siose_gen_x_hum_percent <- areas_siose_gen_x_hum_percent %>%
group_by(HUMEDAL) %>%  # Agrupar por cada humedal
mutate(TOTAL_AREA_HUMEDAL = sum(AREA_USOS_BUFFER)) %>%  # Calcular el total del área para cada humedal
mutate(PORCENTAJE = (AREA_USOS_BUFFER / TOTAL_AREA_HUMEDAL) * 100) %>%  # Calcular el porcentaje para cada categoría de uso de suelo dentro del humedal
ungroup()  # Desagrupar para evitar problemas en operaciones posteriores
# Separar los porcentajes en columnas de usos del suelo por humedal
areas_siose_gen_x_hum_percent$HUMEDAL<-as.factor(areas_siose_gen_x_hum_percent$HUMEDAL)
areas_siose_gen_x_hum_percent_usos_B <- pivot_wider(areas_siose_gen_x_hum_percent,names_from = USOS_GENERAL, values_from = PORCENTAJE)
areas_siose_gen_x_hum_percent_usos_B <- areas_siose_gen_x_hum_percent_usos_B %>%
group_by(HUMEDAL) %>%
summarise(
total_agrario = sum(`Agrario`, na.rm = TRUE),
total_agrario_invernaderos = sum(`Agrario invernaderos`, na.rm = TRUE),
total_cobertura_vegetal = sum(`Cobertura vegetal y suelos`, na.rm = TRUE),
total_urbano_infraestructuras = sum(`Urbano e infraestructuras`, na.rm = TRUE),
total_zonas_humedas = sum(`Zonas humedas`, na.rm = TRUE)
)
# Para SOLO humedal (_H)
areas_mucva_gen_x_hum_percent <- datos_mucva %>%
group_by(USOS_GENERAL, HUMEDAL) %>%
summarise(AREA_USOS_HUMEDAL = sum(AREA_USOS_HUMEDAL)) %>%
ungroup()
areas_mucva_gen_x_hum_percent <- areas_mucva_gen_x_hum_percent %>%
group_by(HUMEDAL) %>%  # Agrupar por cada humedal
mutate(TOTAL_AREA_HUMEDAL = sum(AREA_USOS_HUMEDAL)) %>%  # Calcular el total del área para cada humedal
mutate(PORCENTAJE = (AREA_USOS_HUMEDAL / TOTAL_AREA_HUMEDAL) * 100) %>%  # Calcular el porcentaje para cada categoría de uso de suelo dentro del humedal
ungroup()  # Desagrupar para evitar problemas en operaciones posteriores
# Separar los porcentajes en columnas de usos del suelo por humedal
areas_mucva_gen_x_hum_percent$HUMEDAL<-as.factor(areas_mucva_gen_x_hum_percent$HUMEDAL)
areas_mucva_gen_x_hum_percent_usos_H <- pivot_wider(areas_mucva_gen_x_hum_percent,names_from = USOS_GENERAL, values_from = PORCENTAJE)
areas_mucva_gen_x_hum_percent_usos_H <- areas_mucva_gen_x_hum_percent_usos_H %>%
group_by(HUMEDAL) %>%
summarise(
total_AREA_USOS_HUMEDAL_agrario = sum(`Agrario`, na.rm = TRUE),
total_agrario_invernaderos = sum(`Agrario invernaderos`, na.rm = TRUE),
total_cobertura_vegetal = sum(`Cobertura vegetal y suelos`, na.rm = TRUE),
total_urbano_infraestructuras = sum(`Urbano e infraestructuras`, na.rm = TRUE),
total_zonas_humedas = sum(`Zonas humedas`, na.rm = TRUE)
)
# Para SOLO buffer (_B)
areas_mucva_gen_x_hum_percent <- datos_mucva %>%
group_by(USOS_GENERAL, HUMEDAL) %>%
summarise(AREA_USOS_BUFFER = sum(AREA_USOS_BUFFER)) %>%
ungroup()
areas_mucva_gen_x_hum_percent <- areas_mucva_gen_x_hum_percent %>%
group_by(HUMEDAL) %>%  # Agrupar por cada humedal
mutate(TOTAL_AREA_HUMEDAL = sum(AREA_USOS_BUFFER)) %>%  # Calcular el total del área para cada humedal
mutate(PORCENTAJE = (AREA_USOS_BUFFER / TOTAL_AREA_HUMEDAL) * 100) %>%  # Calcular el porcentaje para cada categoría de uso de suelo dentro del humedal
ungroup()  # Desagrupar para evitar problemas en operaciones posteriores
# Para SOLO buffer (_B)
areas_mucva_gen_x_hum_percent <- datos_mucva %>%
group_by(USOS_GENERAL, HUMEDAL) %>%
summarise(AREA_USOS_BUFFER = sum(AREA_USOS_BUFFER)) %>%
ungroup()
areas_mucva_gen_x_hum_percent <- areas_mucva_gen_x_hum_percent %>%
group_by(HUMEDAL) %>%  # Agrupar por cada humedal
mutate(TOTAL_AREA_HUMEDAL = sum(AREA_USOS_BUFFER)) %>%  # Calcular el total del área para cada humedal
mutate(PORCENTAJE = (AREA_USOS_BUFFER / TOTAL_AREA_HUMEDAL) * 100) %>%  # Calcular el porcentaje para cada categoría de uso de suelo dentro del humedal
ungroup()  # Desagrupar para evitar problemas en operaciones posteriores
# Separar los porcentajes en columnas de usos del suelo por humedal
areas_mucva_gen_x_hum_percent$HUMEDAL<-as.factor(areas_mucva_gen_x_hum_percent$HUMEDAL)
areas_mucva_gen_x_hum_percent_usos_B <- pivot_wider(areas_mucva_gen_x_hum_percent,names_from = USOS_GENERAL, values_from = PORCENTAJE)
areas_mucva_gen_x_hum_percent_usos_B <- areas_mucva_gen_x_hum_percent_usos_B %>%
group_by(HUMEDAL) %>%
summarise(
total_agrario = sum(`Agrario`, na.rm = TRUE),
total_agrario_invernaderos = sum(`Agrario invernaderos`, na.rm = TRUE),
total_cobertura_vegetal = sum(`Cobertura vegetal y suelos`, na.rm = TRUE),
total_urbano_infraestructuras = sum(`Urbano e infraestructuras`, na.rm = TRUE),
total_zonas_humedas = sum(`Zonas humedas`, na.rm = TRUE)
)
# Como la diferencia en porcentaje sale muy extraña, la he vuelto a calcular:
M <- matrix (data=NA, 12, 6)
M<-as.data.frame(M)
for (i in 1:nrow(areas_siose_gen_x_hum_percent_usos)) {
for (j in 1:ncol(areas_siose_gen_x_hum_percent_usos)) {
M[i, j] <- areas_siose_gen_x_hum_percent_usos[i, j] - areas_mucva_gen_x_hum_percent_usos[i, j]
}
}
M[, 1] <- areas_siose_gen_x_hum_percent_usos[, 1]
colnames(M)<-colnames(areas_siose_gen_x_hum_percent_usos)
areas_dif_gen_x_hum_percent_usos <- M
# Para SOLO humedal:
M <- matrix (data=NA, 12, 6)
M<-as.data.frame(M)
for (i in 1:nrow(areas_siose_gen_x_hum_percent_usos_H)) {
for (j in 1:ncol(areas_siose_gen_x_hum_percent_usos_H)) {
M[i, j] <- areas_siose_gen_x_hum_percent_usos_H[i, j] - areas_mucva_gen_x_hum_percent_usos_H[i, j]
}
}
M[, 1] <- areas_siose_gen_x_hum_percent_usos_H[, 1]
colnames(M)<-colnames(areas_siose_gen_x_hum_percent_usos_H)
areas_dif_gen_x_hum_percent_usos_H <- M
# Para SOLO buffer:
M <- matrix (data=NA, 12, 6)
M<-as.data.frame(M)
for (i in 1:nrow(areas_siose_gen_x_hum_percent_usos_B)) {
for (j in 1:ncol(areas_siose_gen_x_hum_percent_usos_B)) {
M[i, j] <- areas_siose_gen_x_hum_percent_usos_B[i, j] - areas_mucva_gen_x_hum_percent_usos_B[i, j]
}
}
M[, 1] <- areas_siose_gen_x_hum_percent_usos_B[, 1]
colnames(M)<-colnames(areas_siose_gen_x_hum_percent_usos_B)
areas_dif_gen_x_hum_percent_usos_B <- M
# Este gráfico representa los cambios de usos del suelo EN BUFFER:
colnames(areas_dif_gen_x_hum_percent_usos_B) <- colnames(areas_dif_gen_x_hum_usos)
areas_dif_gen_x_hum_percent_usos_B$HUMEDAL<-as.factor(areas_dif_gen_x_hum_percent_usos_B$HUMEDAL)
pheatmap(areas_dif_gen_x_hum_percent_usos_B[2:6],
main = "Cambios en el área de los usos del suelo fuera del humedal entre 1984-2020",
labels_row = areas_dif_gen_x_hum_percent_usos_B$HUMEDAL,
display_numbers = TRUE,
number_color = "black",
cluster_cols = F,  # Mantiene el orden original de las columnas
angle_col = 45,    # Inclina los nombres de las columnas 45 grados
fontsize_number = 8)
areas_dif_gen_x_hum_percent_usos_B
?pheatmap
# Estos gráficos representan los usos del suelo (DENTRO DEL HUMEDAL):
colnames(areas_siose_gen_x_hum_percent_usos_H) <- colnames(areas_dif_gen_x_hum_usos)
areas_siose_gen_x_hum_percent_usos_H$HUMEDAL<-as.factor(areas_siose_gen_x_hum_percent_usos_H$HUMEDAL)
pheatmap(areas_siose_gen_x_hum_percent_usos_H[2:6],
main = "Área de los usos del suelo dentro del humedal en 2020",
labels_row = areas_siose_gen_x_hum_percent_usos_H$HUMEDAL,
display_numbers = TRUE,
number_color = "black",
cluster_cols = F,  # Mantiene el orden original de las columnas
angle_col = 45,    # Inclina los nombres de las columnas 45 grados
fontsize_number = 8)
colnames(areas_mucva_gen_x_hum_percent_usos_H) <- colnames(areas_dif_gen_x_hum_usos)
areas_mucva_gen_x_hum_percent_usos_H$HUMEDAL<-as.factor(areas_mucva_gen_x_hum_percent_usos_H$HUMEDAL)
pheatmap(areas_mucva_gen_x_hum_percent_usos_H[2:6],
main = "Área de los usos del suelo dentro del humedal en 1984",
labels_row = areas_mucva_gen_x_hum_percent_usos_H$HUMEDAL,
display_numbers = TRUE,
number_color = "black",
cluster_cols = F,  # Mantiene el orden original de las columnas
angle_col = 45,    # Inclina los nombres de las columnas 45 grados
fontsize_number = 8)
# Estos gráficos representan los usos del suelo (DENTRO DEL HUMEDAL):
colnames(areas_siose_gen_x_hum_percent_usos_H) <- colnames(areas_dif_gen_x_hum_usos)
areas_siose_gen_x_hum_percent_usos_H$HUMEDAL<-as.factor(areas_siose_gen_x_hum_percent_usos_H$HUMEDAL)
pheatmap(areas_siose_gen_x_hum_percent_usos_H[2:6],
main = "Área de los usos del suelo dentro del humedal en 2020",
labels_row = areas_siose_gen_x_hum_percent_usos_H$HUMEDAL,
display_numbers = TRUE,
number_color = "black",
cluster_cols = F,  # Mantiene el orden original de las columnas
angle_col = 45,    # Inclina los nombres de las columnas 45 grados
fontsize_number = 8)
pheatmap(areas_dif_gen_x_hum_percent_usos_H[2:6],
main = "Cambios en el área de los usos del suelo dentro del humedal entre 1984-2020",
labels_row = areas_dif_gen_x_hum_percent_usos_H$HUMEDAL,
display_numbers = TRUE,
number_color = "black",
cluster_cols = F,  # Mantiene el orden original de las columnas
angle_col = 45,    # Inclina los nombres de las columnas 45 grados
fontsize_number = 8)
# Este gráfico representa los cambios de usos del suelo (DENTRO DEL HUMEDAL):
colnames(areas_dif_gen_x_hum_percent_usos_H) <- colnames(areas_dif_gen_x_hum_usos)
areas_dif_gen_x_hum_percent_usos_H$HUMEDAL<-as.factor(areas_dif_gen_x_hum_percent_usos_H$HUMEDAL)
pheatmap(areas_dif_gen_x_hum_percent_usos_H[2:6],
main = "Cambios en el área de los usos del suelo dentro del humedal entre 1984-2020",
labels_row = areas_dif_gen_x_hum_percent_usos_H$HUMEDAL,
display_numbers = TRUE,
number_color = "black",
cluster_cols = F,  # Mantiene el orden original de las columnas
angle_col = 45,    # Inclina los nombres de las columnas 45 grados
fontsize_number = 8)
# Este gráfico representa los cambios de usos del suelo EN BUFFER:
colnames(areas_dif_gen_x_hum_percent_usos_B) <- colnames(areas_dif_gen_x_hum_usos)
areas_dif_gen_x_hum_percent_usos_B$HUMEDAL<-as.factor(areas_dif_gen_x_hum_percent_usos_B$HUMEDAL)
pheatmap(areas_dif_gen_x_hum_percent_usos_B[2:6],
main = "Cambios en el área de los usos del suelo fuera del humedal entre 1984-2020",
labels_row = areas_dif_gen_x_hum_percent_usos_B$HUMEDAL,
display_numbers = TRUE,
number_color = "black",
cluster_cols = F,  # Mantiene el orden original de las columnas
angle_col = 45,    # Inclina los nombres de las columnas 45 grados
fontsize_number = 8)
#Usos del suelo con un área significativamente diferente en el año 2020 (SIOSE)
modelo_lm2020 <- lm(AREA_USOS_BUFFER~USOS_GENERAL+HUMEDAL, data=datos_siose)
summary(modelo_lm2020)
#Cambios del área de los usos del suelo dentro del humedal
modelo_lm_hum <- lm(datos$AREA_USOS_HUMEDAL~USOS_GENERAL+HUMEDAL, data=datos_dif)
summary(modelo_lm_hum)
DATOS
datos
AREA_USOS
pivot_wider(datos, names_from = ORIGEN,values_from = AREA_USOS)
#Cambios del área de los usos del suelo fuera del humedal
modelo_lm_buf <- lm(datos$AREA_USOS_BUFFER~USOS_DEFINITIVOS+HUMEDAL, data=datos)
summary(modelo_lm_buf)
modelo <- aov(datos$AREA_USOS_BUFFER~USOS_DEFINITIVOS+HUMEDAL, data=datos) # Analisis de la varianza con funcion aov
summary(modelo)
Anova(modelo)
TukeyHSD(modelo)
modelo <- aov(AREA_USOS_BUFFER~USOS_DEFINITIVOS+HUMEDAL, data=datos) # Analisis de la varianza con funcion aov
summary(modelo)
Anova(modelo)
TukeyHSD(modelo)
modelo <- aov(AREA_USOS_BUFFER~USOS_GENERALES+HUMEDAL, data=datos) # Analisis de la varianza con funcion aov
modelo <- aov(AREA_USOS_BUFFER~USOS_GENERAL+HUMEDAL, data=datos) # Analisis de la varianza con funcion aov
summary(modelo)
Anova(modelo)
TukeyHSD(modelo)
modelo <- aov(AREA_USOS_BUFFER~USOS_GENERAL*HUMEDAL, data=datos) # Analisis de la varianza con funcion aov
summary(modelo)
Anova(modelo)
TukeyHSD(modelo)
